import{s as t,r as a,h as s,a as e,b as c,c as l,w as o,i as r,o as i,d as n,e as d,f as u,g as f,F as p,t as _,j as m,k as h,l as b,m as g}from"./index-By6Kt9Es.js";const k=((t,a)=>{const s=t.__vccOpts||t;for(const[e,c]of a)s[e]=c;return s})({data:()=>({products:[],cart:[]}),computed:{totalPrice(){return this.cart.reduce(((t,a)=>t+parseFloat(a.price)),0).toFixed(2)}},onLoad(){this.fetchProducts()},methods:{fetchProducts(){t({title:"åŠ è½½ä¸­..."}),a({url:"http://www.yunbaoymgf.chat/api/products/",method:"GET",success:t=>{console.log("åŽå°è¿”å›žæ•°æ®ï¼š",t.data),this.products=t.data,s()},fail:t=>{console.error(t),s(),e({title:"è¿žæŽ¥å¤±è´¥",content:"è¯·æ£€æŸ¥ç”µè„‘IPæ˜¯å¦å¡«å¯¹ï¼Œæ‰‹æœºå’Œç”µè„‘æ˜¯å¦åœ¨åŒä¸€ä¸ªWiFiä¸‹ã€‚\né”™è¯¯ä¿¡æ¯:"+JSON.stringify(t)})}})},addToCart(t){this.cart.push(t),c({title:"å·²åŠ å…¥",icon:"none"})},openOrderModal(){e({title:"ç¡®è®¤ä¸‹å•",content:`æ€»é‡‘é¢ï¼šÂ¥${this.totalPrice}\nè¯·ç¡®è®¤ä¸‹å•å¹¶è”ç³»è€æ¿æ”¯ä»˜ï¼Ÿ`,confirmText:"ç¡®è®¤ä¸‹å•",cancelText:"å†çœ‹çœ‹",success:t=>{t.confirm&&this.submitOrder("å¾®ä¿¡ç”¨æˆ·","13800000000","å¸‚åŒºä¾¿åˆ©åº—")}})},submitOrder(l,o,r){let i=this.cart.map((t=>`${t.name}`)).join(", ");t({title:"æ­£åœ¨æäº¤..."}),a({url:"http://www.yunbaoymgf.chat/api/orders/",method:"POST",data:{customer_name:l,phone:o,address:r,items_info:i,total_price:this.totalPrice,status:0},success:t=>{s(),201===t.statusCode||200===t.statusCode?(e({title:"ä¸‹å•æˆåŠŸï¼",content:"è€æ¿å·²æ”¶åˆ°è®¢å•ã€‚\nè¯·å¾®ä¿¡è½¬è´¦ç»™è€æ¿ï¼Œå¤‡æ³¨å§“åå³å¯ã€‚",showCancel:!1,confirmText:"æˆ‘çŸ¥é“äº†"}),this.cart=[]):c({title:"ä¸‹å•å¤±è´¥",icon:"none"})},fail:()=>{s(),c({title:"ç½‘ç»œé”™è¯¯",icon:"none"})}})}}},[["render",function(t,a,s,e,c,k){const w=h,y=r,C=g,P=b;return i(),l(y,{class:"container"},{default:o((()=>[n(y,{class:"header"},{default:o((()=>[n(w,{class:"title"},{default:o((()=>[d("ðŸ“„ æžé€Ÿçº¸ä¸šæ‰¹å‘")])),_:1}),n(w,{class:"subtitle"},{default:o((()=>[d("å·¥åŽ‚ç›´å‘ Â· é€è´§ä¸Šé—¨")])),_:1})])),_:1}),n(y,{class:"product-box"},{default:o((()=>[n(y,{class:"section-title"},{default:o((()=>[d("ä»Šæ—¥çƒ­é”€")])),_:1}),(i(!0),u(p,null,f(c.products,((t,a)=>(i(),l(y,{class:"product-item",key:a},{default:o((()=>[n(C,{src:t.image_url,mode:"aspectFill",class:"p-img"},null,8,["src"]),n(y,{class:"p-info"},{default:o((()=>[n(w,{class:"p-name"},{default:o((()=>[d(_(t.name),1)])),_:2},1024),n(w,{class:"p-spec"},{default:o((()=>[d(_(t.spec),1)])),_:2},1024),n(w,{class:"p-stock"},{default:o((()=>[d("åº“å­˜: "+_(t.stock),1)])),_:2},1024)])),_:2},1024),n(y,{class:"p-action"},{default:o((()=>[n(w,{class:"p-price"},{default:o((()=>[d("Â¥"+_(t.price),1)])),_:2},1024),n(P,{size:"mini",type:"warn",onClick:a=>k.addToCart(t)},{default:o((()=>[d("+ åŠ è´­")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),c.cart.length>0?(i(),l(y,{key:0,class:"cart-bar"},{default:o((()=>[n(y,{class:"cart-info"},{default:o((()=>[n(w,{class:"cart-count"},{default:o((()=>[d("å·²é€‰ "+_(c.cart.length)+" ä»¶",1)])),_:1}),n(w,{class:"cart-total"},{default:o((()=>[d("åˆè®¡: Â¥"+_(k.totalPrice),1)])),_:1})])),_:1}),n(P,{class:"buy-btn",onClick:k.openOrderModal},{default:o((()=>[d("åŽ»ç»“ç®—")])),_:1},8,["onClick"])])),_:1})):m("",!0)])),_:1})}],["__scopeId","data-v-45954d17"]]);export{k as default};
